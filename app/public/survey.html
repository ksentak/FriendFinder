<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Survey</title>

    <!-- Linking Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

    <style>
        img {
            height: 250px;
            width: 250px;
        }
    </style>
</head>

<body>
    <div class="jumbotron jumbotron-fluid text-center bg-primary text-white">
        <div class="container">
            <h1 class="display-4">Answer the Questions Below</h1>
            <p class="lead">When you are finished, you will be matched with your famous character best friend!
            </p>
        </div>
    </div>

    <div class="container">
        <div class="col-sm-10 offset-1">
            <!-- Name Input -->
            <div class="form-group">
                <label for="nameInput">Please enter your name:</label>
                <input type="name" class="form-control" id="name" placeholder="Your name here...">
            </div>

            <!-- Image Upload -->
            <div class="form-group">
                <label for="Photo Link">Link to photo image:</label>
                <input type="text" class="form-control" id="photo" placeholder="Insert link here...">
            </div>

            <h6>Answer the next 10 questions using the following scale:
                <br>1 - Strongly Disagree, 2 - Somewhat Disagree, 3 - Neutral, 4 - Somewhat Agree, 5 - Strongly
                Agree</h6>

            <!-- Question 1 -->
            <div class="form-group">
                <label for="q1">You are a person that enjoys eating doughnuts:</label>
                <select class="form-control" id="question1">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 2 -->
            <div class="form-group">
                <label for="q2">You are a person who likes to exercise:</label>
                <select class="form-control" id="question2">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 3 -->
            <div class="form-group">
                <label for="q3">You consider yourself a friendly person:</label>
                <select class="form-control" id="question3">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 4 -->
            <div class="form-group">
                <label for="q4">You are a person who enjoys laughing at the expense of others:</label>
                <select class="form-control" id="question4">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 5 -->
            <div class="form-group">
                <label for="q5">You are a person that likes to help others:</label>
                <select class="form-control" id="question5">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 6 -->
            <div class="form-group">
                <label for="q6">You are a person who likes to drink beer:</label>
                <select class="form-control" id="question6">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 7 -->
            <div class="form-group">
                <label for="q7">You are a person who likes their current job:</label>
                <select class="form-control" id="question7">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 8 -->
            <div class="form-group">
                <label for="q8">You are a person who forgets things frequently:</label>
                <select class="form-control" id="question8">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 9 -->
            <div class="form-group">
                <label for="q9">You are a person that considers yourself hard-working:</label>
                <select class="form-control" id="question9">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <!-- Question 10 -->
            <div class="form-group">
                <label for="q10">You are a person that enjoys watching TV:</label>
                <select class="form-control" id="question10">
                    <option>1</option>
                    <option>2</option>
                    <option>3</option>
                    <option>4</option>
                    <option>5</option>
                </select>
            </div>

            <div class="text-center">
                <button type="button" id="submit" class="btn btn-primary" data-toggle="modal"
                    data-target="#myModal">Submit
                </button>


                <!-- The Modal -->
                <div class="modal" id="myModal">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content">

                            <!-- Modal Header -->
                            <div class="modal-header">
                                <h4 class="modal-title">Your character best friend is:</h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>

                            <!-- Modal body -->
                            <div class="modal-body">
                                <h2 id="buddyName"></h2>
                                <img id="buddyImg" src="">
                            </div>

                            <!-- Modal footer -->
                            <div class="modal-footer">

                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>

        $("#submit").on("click", function (event) {
            event.preventDefault();

            //Function to validate answers are filled out
            function validForm() {
                var isValid = true;
                $(".form-control").each(function () {
                    if ($(this).val() === "") {
                        isValid = false;
                    }
                });

                return isValid;
            }

            if (validForm()) {

                var newFriend = {
                    name: $("#name").val().trim(),
                    photo: $("#photo").val().trim(),
                    scores: [
                        $("#question1").val(),
                        $("#question2").val(),
                        $("#question3").val(),
                        $("#question4").val(),
                        $("#question5").val(),
                        $("#question6").val(),
                        $("#question7").val(),
                        $("#question8").val(),
                        $("#question9").val(),
                        $("#question10").val()
                    ]
                };

                console.log(newFriend);

                $.post("/api/friends", newFriend,
                    function (data) {
                        $("#buddyName").text(data.name);

                        $("#buddyImg").attr("src", data.photo);

                        $('#myModal').modal('toggle');

                        // Clears data
                        $("#name").val(""),
                            $("#photo").val(""),
                            $("#question1").val(""),
                            $("#question2").val(""),
                            $("#question3").val(""),
                            $("#question4").val(""),
                            $("#question5").val(""),
                            $("#question6").val(""),
                            $("#question7").val(""),
                            $("#question8").val(""),
                            $("#question9").val(""),
                            $("#question10").val("")
                    });

            } else {
                alert("Make sure to complete all of the questions before submitting the form.")
            }

        });


    </script>

</body>

</html>